<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="repo.css">
        <script src="jquery-3.6.2.min.js"></script>
        <script src="repo.js"></script>
        <title>Document</title>
        <script>
            const expoRepo = new ExpenseManager();

            function createData(){
                expoRepo.addNewExpense(new Expenses("Food at cafe",1555,new Date(2022,9,12)))
                expoRepo.addNewExpense(new Expenses("Brunch at cafe",120,new Date(2022,10,23)))
                expoRepo.addNewExpense(new Expenses("coffee at cafe",1555,new Date(2022,11,11)))
                expoRepo.addNewExpense(new Expenses("tea at cafe",1555,new Date(2022,11,12)))
            }
            function dateString(date){
            return `${date.getDate()}-${date.getMonth() + 1}-${date.getFullYear()}`;
        }

        function displayRecord(){

                $(".container").children("div").hide();
                $(".container").children("div:eq(1)").show(0)
                const foundRec = expoRepo.getExpenseById(id);
                $("txtId").val(foundRec.id)








        }
            function populate(){

                $.each(data,(index,item)=>{
                    // remove all the row expect first row
                    // $("table").find("tr:gt(0)").remove();
                    const row = `<tr>
                        <td>${item.id}</td>
                        <td>${item.details}</td>
                        <td>${item.amount}</td>
                        <td>${dateString(item.date)}</td>
                        <td><a href="#" onclick="displayRecord(${item.id})"/>Edit</td>
                        `;
                        $("table").append(row);
                })
            }

            function onDisplayTable(){
                $(".container").children("div").hide();
                $(".container").children("div:first").show(2000);
                const data = expoRepo.getAllExpnses();
                populate();
            }
            function onDisplayNewExpense(){
                $(".container").children("div").hide();
                $(".container").children("div:last").show(2000);
            }
            function onFindExpenseByDate(){
                $(".container").children("div").hide();
                $(".container>div:first").next().show(2000)
            }
            function onFindExpenseByDetail(){
                // $(".container").children("div").hide();
                alert("msg")
            }
        function init(){
            createData();
            $("div.container").children("div").hide();
            $("a:first").click(onDisplayTable)
            $("a:eq(1)").click(onDisplayNewExpense)
            $("ul>li:eq(2)>a").click(onFindExpenseByDate)
            $("ul>li:eq(3)>a").click(onFindExpenseByDetail)
        }
        $().ready(init);
    </script>
    </head>
    <body>
        <h1>Expense Manager</h1>

        <nav style="text-align: center;">
            <ul>
                <li><a href="#">View All</a> </li>
                <li><a href="#">Add new Expense</a> </li>
                <li><a href="#"> Find by Date</a> </li>
                <li><a href="#">Find by details</a> </li>

            </ul>
        </nav>

        <hr>
        <div class="container">
            <div>
                <h2>Table Records</h2>
                <hr>
                <table border="1">
                    <tr>
                        <th>ID</th>
                        <th>Details</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Options</th>
                    </tr>
                </table>
            </div>
            <div>
                <h2>Details of Expense</h2>
                <p>
                    Id:<input type="number" id="txtId">
                </p>
                <p>
                    Details:<input type="text" id="txtName">
                </p>
                <p>
                    Amount:<input type="number" id="txtAmount">
                </p>
                <p>
                    <button>Save</button>
                    <button>Cancle</button>
                </p>
        
            </div>
            <div>
                <h2>Add new Expense</h2>
            </div>

        </div>
    </body>
</html>